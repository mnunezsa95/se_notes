### What are "Secret Keys"
* Keys that are sent to the user during token creation (see [[JWTs (JSON Web Tokens)]])

### Secret Keys
* Should not be made of meaningful words
* Having a long combination of random characters as a key is a more effective method of ensuring that a secret key remains secret.

### Strong Cryptographic & Pseudorandom
* Strong cryptographically --> data is being generated by an algorithm 
	* It cannot be effectively analyzed
* Pseudorandom --> 'random' characters are NOT actually random
	* Are generated by a mathematical algorithm  

### Secret Key Parameters
* Should be 
	* a sequence of binary characters (a string of 0s and 1s)
	* 128 or 256 characters long

### How to create secret keys
1) Use the `crypto` module (see [[Node.js - Module - crypto]], [[Node.js - Methods]])
2) Pass in the number of bytes to be used
3) Convert the bytes to a string using the `toString()` method

```js
const crypto = require('crypto'); // importing the crypto module

// generating a random sequence of 16 bytes (128 bits) 
const randomString = crypto.randomBytes(16).toString('hex'); // converting it into a string

console.log(randomString); // 5cdd183194489560b0e6bfaf8a81541e
```

* Can be done directly in the console
```bash
* Generating a 256-bit key to the console
node -e "console.log(require('crypto').randomBytes(32).toString('hex'));" 
```

### Storing Keys
* Keys SHOULD NOT be stored in the code
* Storing Keys Safely
	1) Create an `.env` file in the root
	2) Store keys in this file
```bash
NODE_ENV=production JWT_SECRET=eb28135ebcfc17578f96d4d65b6c7871f2c803be4180c165061d5c2db621c51b
```

### Loading the .env folder in Node.js
1) The `.env` file can be loaded into Node using the `dotenv` module followed by the `.config()` method (see [[Node.js - Methods]], [[Node.js - The .env file]], [[Node.js - Module - dotenv]])
2) Add the `.env` file to the `.gitignore` file
3) Access the variables when generating a token
```js
require('dotenv').config();

const { NODE_ENV, JWT_SECRET } = process.env;

const token = jwt.sign(
  { _id: user._id },
  NODE_ENV === 'production' ? JWT_SECRET : 'dev-secret'
); 
```